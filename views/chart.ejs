<%- include("partials/header") -%>
<div class="container">
  <div class="head-logo">
    <a href="/"><h1>Snacker Tracker</h1></a>
  </div>
  <form action="/add" method="post" class="snack-form">
    <div class="chart-selections">
      <select name="users">
        <option value="">-Select User</option>
        <% users.forEach(function(user){ %>
        <option value="<%= user._id %>" label="<%=user.name %>">
          <%= user.name %>
        </option>
        <% }) %>
      </select>
      <select name="snacks">
        <div class="snack-opt">
          <option value="">-Select Snack</option>
        </div>
        <% snacks.forEach(function(snack){ %>
        <option value="<%= snack._id %>" label="<%=snack.name %>">
          <%= snack.name %>
        </option>
        <% }) %>
      </select>
    </div>
  </form>
  <div class="chart-area">
    <canvas id="myChart"></canvas>
    <script>
      var ctx = document.getElementById('myChart').getContext('2d');
      var myChart = new Chart(ctx, {
          type: 'bar',
          data: {
              labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
              datasets: [{
                  label: '# of Snacks',
                  data: <%- JSON.stringify(data)%>,
                  backgroundColor: [
                  'rgba(54, 162, 235, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                  ],
                  borderColor: [
                  'rgba(54, 162, 235, 1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(54, 162, 235, 1)'
                  ],
                  borderWidth: 1
              }]
          },
          options: {
              scales: {
                  y: {
                      beginAtZero: true
                  }
              }
          }
      });
    </script>
  </div>
  <div class="foot-nav">
    <a href="/dash"><i class="fas fa-chart-line"></i></a>
    <a href="/users"><i class="fas fa-user"></i></a>
    <a href="/snacks"><i class="fas fa-utensils"></i></a>
    <i class="fas fa-mortar-pestle active-icon"></i>
  </div>
</div>
<%- include("partials/footer") -%>
